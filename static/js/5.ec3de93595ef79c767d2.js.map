{"version":3,"sources":["webpack:///src/views/send/send.vue","webpack:///./src/views/send/send.vue?6749","webpack:///./src/views/send/send.vue"],"names":["send_send","name","data","_this2","this","showSecret","formSend","secret","asset","addr","amount","remark","assets","ruleSend","validator","rule","value","callback","Error","$t","trigger","parseFloat","methods","init","id","handleSubmit","_this3","$refs","validate","valid","wallet","hasSecret","send","handleSecretSubmit","eqSecret","$Modal","warning","title","content","okText","handleCancel","_this4","asyncToGenerator_default","regenerator_default","a","mark","_callee","w","_this","wrap","_context","prev","next","$store","state","transfer","then","result","success","vue_esm","config","productionTip","console","log","error","stop","mounted","views_send_send","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","rules","label-width","label","prop","placeholder","$$v","$set","expression","_l","item","key","_v","_s","type","number","staticStyle","width","on","click","$event","closable","mask-closable","class-name","text-align","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.ec3de93595ef79c767d2.js","sourcesContent":["<style lang=\"less\">\n    @import './send.less';\n</style>\n<template>\n    <div class=\"send-main\">\n        <div class=\"send-form\">\n            <Form ref=\"formSend\" :model=\"formSend\" :rules=\"ruleSend\" :label-width=\"80\">\n                <FormItem :label=\"$t('page_send.send_form.label.assets')\" prop=\"asset\">\n                    <Select v-model=\"formSend.asset\" placeholder=\"\">\n                        <Option v-for=\"item in assets\" :value=\"item.id\" :key=\"item.id\">{{ item.name }}</Option>\n                    </Select>\n                </FormItem>\n                <FormItem :label=\"$t('page_send.send_form.label.to_addr')\" prop=\"addr\">\n                    <Input type=\"text\" v-model=\"formSend.addr\" placeholder=\"\"></Input>\n                </FormItem>\n                <FormItem :label=\"$t('page_send.send_form.label.amount')\" prop=\"amount\">\n                    <Input type=\"text\" v-model=\"formSend.amount\" number placeholder=\"\"></Input>\n                </FormItem>\n                <FormItem :label=\"$t('page_send.send_form.label.remark')\" prop=\"remark\">\n                    <Input type=\"textarea\" v-model=\"formSend.remark\"  placeholder=\"\"></Input>\n                </FormItem>\n                <FormItem>\n                    <Button style=\"width:100px;\" type=\"primary\" @click=\"handleSubmit('formSend')\">{{$t('page_send.send_form.btn')}}</Button>\n                </FormItem>\n            </Form>\n        </div>\n        <Modal v-model=\"showSecret\" :closable=\"false\" :mask-closable=\"false\" class-name=\"vertical-center-modal\" width=\"350\">\n            <div slot=\"header\"  style=\"text-align:center;\">\n                {{$t('page_send.modal_secret.title')}}\n            </div>\n            <div>\n                <Input type=\"password\" v-model=\"formSend.secret\" placeholder=\"\"></Input>\n            </div>\n            <div slot=\"footer\"  style=\"text-align:center;\">\n                <Button  style=\"width:80px;\" @click=\"handleCancel\">{{$t('page_send.modal_secret.btn.cancel')}}</Button>\n                <Button  type=\"primary\" style=\"width:80px;\" @click=\"handleSecretSubmit\">{{$t('page_send.modal_secret.btn.confirm')}}</Button>\n            </div>\n        </Modal>\n    </div>\n</template>\n<script>\n    import wallet from '../../libs/wallet/wallet';\n    import Vue from 'vue';\n    export default {\n        name:'send',\n        data() {\n            const validateAsset = (rule, value, callback) => {\n                if (value === '') {\n                    callback(new Error(this.$t('page_send.send_form.validate.assets')));\n                } else {\n                    callback();\n                }\n            };\n            const validateAddr = (rule, value, callback) => {\n                if (value === '') {\n                    callback(new Error(this.$t('page_send.send_form.validate.to_addr')));\n                }else {\n                    //异步验证\n                    // setTimeout(() => {\n                        //ajax\n                        // if(rlt)\n                        // {\n                        //     callback();\n                        // }\n                        // else\n                        // {\n                        //     callback(new Error('请输入对方地址'));\n                        // }\n                    //     callback();\n                    // }, 2000);\n                    callback();\n                }\n            };const validateAmount = (rule, value, callback) => {\n                if (value === '') {\n                    callback(new Error(this.$t('page_send.send_form.validate.amount')));\n                }else {\n                    if (parseFloat(value)<=0) {\n                        callback(new Error(this.$t('page_send.send_form.validate.amount_check')));\n                    }\n                    callback();\n                }\n            };\n            return {\n                showSecret:false,\n                formSend: {\n                    secret:'',\n                    asset: '',\n                    addr: '',\n                    amount: '',\n                    remark: ''\n                },\n                assets:[],\n                ruleSend: {\n                    addr: [\n                        { validator: validateAddr, trigger: 'blur' }\n                    ],\n                    amount: [\n                        { validator: validateAmount, trigger: 'blur' }\n                    ],\n                    asset: [\n                        { validator: validateAsset, trigger: 'change' }\n                    ],\n                }\n            };\n        },\n        methods: {\n            init(){\n                this.assets=[\n                    {id:1,name:'SDG'},\n                    // {id:2,name:'DJS'},\n                    // {id:3,name:'IDSE'},\n                    // {id:4,name:'DSA'},\n                ];\n                this.formSend.asset=1;\n            },\n            handleSubmit (name) {\n                this.$refs[name].validate((valid) => {\n                    if (valid) {\n                        if(wallet.hasSecret())\n                        {\n                            this.showSecret=true;\n                        }\n                        else{\n                            this.send();\n                        }\n                    } else {\n                    }\n                });\n\n                //reset form\n                //this.$refs[name].resetFields();\n            },\n            handleSecretSubmit(){\n                if(wallet.eqSecret(this.formSend.secret))\n                {\n                    this.send();\n                }\n                else\n                {\n                    this.$Modal.warning({\n                            title: this.$t('page_send.modal.title'),\n                            content: this.$t('page_send.modal.content_1'),\n                            okText:this.$t('page_send.modal.btn')\n                        });\n                }\n            },\n            handleCancel(){\n                this.showSecret=false;\n                this.formSend.secret='';\n            },\n            async send()\n            {\n                    let w=this.$store.state.wallet;\n                    let _this=this;\n                    await w.transfer(this.formSend.addr,this.formSend.amount,this.formSend.remark).then(\n                        function(data){\n                            if(data.result=='accepted')\n                            {\n                                _this.$Modal.success({\n                                    title: _this.$t('page_send.modal.title'),\n                                    content: _this.$t('page_send.modal.content_2'),\n                                    okText:_this.$t('page_send.modal.btn')\n                                });\n                                _this.formSend.amount='';\n                                _this.formSend.addr='';\n                                _this.formSend.secret='';\n                                _this.formSend.remark='';\n                                _this.showSecret=false;\n                            }\n                            else\n                            {\n                                \n                            }\n                            if(!Vue.config.productionTip)\n                            {\n                                console.log(data);\n                            }\n                        },\n                        function(error, data){\n                             _this.$Modal.warning({\n                                title: _this.$t('page_send.modal.title'),\n                                content: _this.$t('page_send.modal.content_3'),\n                                okText:_this.$t('page_send.modal.btn')\n                            });\n                            _this.showSecret=false;\n                            _this.formSend.secret='';\n                            if(!Vue.config.productionTip)\n                            {\n                                console.log(error);\n                            }\n                        }\n                    );\n            }\n            \n        },\n        mounted() {\n            this.init();\n\n        }\n    };\n</script>\n\n\n// WEBPACK FOOTER //\n// src/views/send/send.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"send-main\"},[_c('div',{staticClass:\"send-form\"},[_c('Form',{ref:\"formSend\",attrs:{\"model\":_vm.formSend,\"rules\":_vm.ruleSend,\"label-width\":80}},[_c('FormItem',{attrs:{\"label\":_vm.$t('page_send.send_form.label.assets'),\"prop\":\"asset\"}},[_c('Select',{attrs:{\"placeholder\":\"\"},model:{value:(_vm.formSend.asset),callback:function ($$v) {_vm.$set(_vm.formSend, \"asset\", $$v)},expression:\"formSend.asset\"}},_vm._l((_vm.assets),function(item){return _c('Option',{key:item.id,attrs:{\"value\":item.id}},[_vm._v(_vm._s(item.name))])}),1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":_vm.$t('page_send.send_form.label.to_addr'),\"prop\":\"addr\"}},[_c('Input',{attrs:{\"type\":\"text\",\"placeholder\":\"\"},model:{value:(_vm.formSend.addr),callback:function ($$v) {_vm.$set(_vm.formSend, \"addr\", $$v)},expression:\"formSend.addr\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":_vm.$t('page_send.send_form.label.amount'),\"prop\":\"amount\"}},[_c('Input',{attrs:{\"type\":\"text\",\"number\":\"\",\"placeholder\":\"\"},model:{value:(_vm.formSend.amount),callback:function ($$v) {_vm.$set(_vm.formSend, \"amount\", $$v)},expression:\"formSend.amount\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":_vm.$t('page_send.send_form.label.remark'),\"prop\":\"remark\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"\"},model:{value:(_vm.formSend.remark),callback:function ($$v) {_vm.$set(_vm.formSend, \"remark\", $$v)},expression:\"formSend.remark\"}})],1),_vm._v(\" \"),_c('FormItem',[_c('Button',{staticStyle:{\"width\":\"100px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleSubmit('formSend')}}},[_vm._v(_vm._s(_vm.$t('page_send.send_form.btn')))])],1)],1)],1),_vm._v(\" \"),_c('Modal',{attrs:{\"closable\":false,\"mask-closable\":false,\"class-name\":\"vertical-center-modal\",\"width\":\"350\"},model:{value:(_vm.showSecret),callback:function ($$v) {_vm.showSecret=$$v},expression:\"showSecret\"}},[_c('div',{staticStyle:{\"text-align\":\"center\"},attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"\\n            \"+_vm._s(_vm.$t('page_send.modal_secret.title'))+\"\\n        \")]),_vm._v(\" \"),_c('div',[_c('Input',{attrs:{\"type\":\"password\",\"placeholder\":\"\"},model:{value:(_vm.formSend.secret),callback:function ($$v) {_vm.$set(_vm.formSend, \"secret\", $$v)},expression:\"formSend.secret\"}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"text-align\":\"center\"},attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{staticStyle:{\"width\":\"80px\"},on:{\"click\":_vm.handleCancel}},[_vm._v(_vm._s(_vm.$t('page_send.modal_secret.btn.cancel')))]),_vm._v(\" \"),_c('Button',{staticStyle:{\"width\":\"80px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSecretSubmit}},[_vm._v(_vm._s(_vm.$t('page_send.modal_secret.btn.confirm')))])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5f1ca6aa\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/send/send.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5f1ca6aa\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./send.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./send.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./send.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5f1ca6aa\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./send.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/send/send.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}