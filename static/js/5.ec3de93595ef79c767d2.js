webpackJsonp([5],{"23ht":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),r=n.n(a),o=n("exGp"),s=n.n(o),d=n("zqFS"),l=n("7+uW"),c={name:"send",data:function(){var e=this;return{showSecret:!1,formSend:{secret:"",asset:"",addr:"",amount:"",remark:""},assets:[],ruleSend:{addr:[{validator:function(t,n,a){""===n?a(new Error(e.$t("page_send.send_form.validate.to_addr"))):a()},trigger:"blur"}],amount:[{validator:function(t,n,a){""===n?a(new Error(e.$t("page_send.send_form.validate.amount"))):(parseFloat(n)<=0&&a(new Error(e.$t("page_send.send_form.validate.amount_check"))),a())},trigger:"blur"}],asset:[{validator:function(t,n,a){""===n?a(new Error(e.$t("page_send.send_form.validate.assets"))):a()},trigger:"change"}]}}},methods:{init:function(){this.assets=[{id:1,name:"SDG"}],this.formSend.asset=1},handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e&&(d.a.hasSecret()?t.showSecret=!0:t.send())})},handleSecretSubmit:function(){d.a.eqSecret(this.formSend.secret)?this.send():this.$Modal.warning({title:this.$t("page_send.modal.title"),content:this.$t("page_send.modal.content_1"),okText:this.$t("page_send.modal.btn")})},handleCancel:function(){this.showSecret=!1,this.formSend.secret=""},send:function(){var e=this;return s()(r.a.mark(function t(){var n,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$store.state.wallet,a=e,t.next=4,n.transfer(e.formSend.addr,e.formSend.amount,e.formSend.remark).then(function(e){"accepted"==e.result&&(a.$Modal.success({title:a.$t("page_send.modal.title"),content:a.$t("page_send.modal.content_2"),okText:a.$t("page_send.modal.btn")}),a.formSend.amount="",a.formSend.addr="",a.formSend.secret="",a.formSend.remark="",a.showSecret=!1),l.default.config.productionTip||console.log(e)},function(e,t){a.$Modal.warning({title:a.$t("page_send.modal.title"),content:a.$t("page_send.modal.content_3"),okText:a.$t("page_send.modal.btn")}),a.showSecret=!1,a.formSend.secret="",l.default.config.productionTip||console.log(e)});case 4:case"end":return t.stop()}},t,e)}))()}},mounted:function(){this.init()}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"send-main"},[n("div",{staticClass:"send-form"},[n("Form",{ref:"formSend",attrs:{model:e.formSend,rules:e.ruleSend,"label-width":80}},[n("FormItem",{attrs:{label:e.$t("page_send.send_form.label.assets"),prop:"asset"}},[n("Select",{attrs:{placeholder:""},model:{value:e.formSend.asset,callback:function(t){e.$set(e.formSend,"asset",t)},expression:"formSend.asset"}},e._l(e.assets,function(t){return n("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1)],1),e._v(" "),n("FormItem",{attrs:{label:e.$t("page_send.send_form.label.to_addr"),prop:"addr"}},[n("Input",{attrs:{type:"text",placeholder:""},model:{value:e.formSend.addr,callback:function(t){e.$set(e.formSend,"addr",t)},expression:"formSend.addr"}})],1),e._v(" "),n("FormItem",{attrs:{label:e.$t("page_send.send_form.label.amount"),prop:"amount"}},[n("Input",{attrs:{type:"text",number:"",placeholder:""},model:{value:e.formSend.amount,callback:function(t){e.$set(e.formSend,"amount",t)},expression:"formSend.amount"}})],1),e._v(" "),n("FormItem",{attrs:{label:e.$t("page_send.send_form.label.remark"),prop:"remark"}},[n("Input",{attrs:{type:"textarea",placeholder:""},model:{value:e.formSend.remark,callback:function(t){e.$set(e.formSend,"remark",t)},expression:"formSend.remark"}})],1),e._v(" "),n("FormItem",[n("Button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formSend")}}},[e._v(e._s(e.$t("page_send.send_form.btn")))])],1)],1)],1),e._v(" "),n("Modal",{attrs:{closable:!1,"mask-closable":!1,"class-name":"vertical-center-modal",width:"350"},model:{value:e.showSecret,callback:function(t){e.showSecret=t},expression:"showSecret"}},[n("div",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[e._v("\n            "+e._s(e.$t("page_send.modal_secret.title"))+"\n        ")]),e._v(" "),n("div",[n("Input",{attrs:{type:"password",placeholder:""},model:{value:e.formSend.secret,callback:function(t){e.$set(e.formSend,"secret",t)},expression:"formSend.secret"}})],1),e._v(" "),n("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[n("Button",{staticStyle:{width:"80px"},on:{click:e.handleCancel}},[e._v(e._s(e.$t("page_send.modal_secret.btn.cancel")))]),e._v(" "),n("Button",{staticStyle:{width:"80px"},attrs:{type:"primary"},on:{click:e.handleSecretSubmit}},[e._v(e._s(e.$t("page_send.modal_secret.btn.confirm")))])],1)])],1)},staticRenderFns:[]};var m=n("VU/8")(c,i,!1,function(e){n("gA5f")},null,null);t.default=m.exports},gA5f:function(e,t){}});
//# sourceMappingURL=5.ec3de93595ef79c767d2.js.map